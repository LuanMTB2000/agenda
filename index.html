<!DOCTYPE html>

<html lang="pt-BR">

<head>

ย ย <meta charset="UTF-8">

ย ย <meta name="viewport" content="width=device-width, initial-scale=1.0">

ย ย <title>MrJack - Sistema de Agendamentos</title>

ย ย <style>

ย ย ย ย /* Estilos CSS (inalterados do seu cรณdigo original) */

ย ย ย ย * {

ย ย ย ย ย ย margin: 0;

ย ย ย ย ย ย padding: 0;

ย ย ย ย ย ย box-sizing: border-box;

ย ย ย ย }



ย ย ย ย body {

ย ย ย ย ย ย font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;

ย ย ย ย ย ย background-color: #000; /* Alterado para preto */

ย ย ย ย ย ย min-height: 100vh;

ย ย ย ย ย ย padding: 20px;

ย ย ย ย }



ย ย ย ย .container {

ย ย ย ย ย ย max-width: 900px;

ย ย ย ย ย ย margin: 0 auto;

ย ย ย ย ย ย background: rgba(255, 255, 255, 0.95);

ย ย ย ย ย ย backdrop-filter: blur(20px);

ย ย ย ย ย ย border-radius: 24px;

ย ย ย ย ย ย box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);

ย ย ย ย ย ย overflow: hidden;

ย ย ย ย ย ย border: 1px solid rgba(255, 255, 240, 0.2);

ย ย ย ย }



ย ย ย ย .header {

ย ย ย ย ย ย background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);

ย ย ย ย ย ย color: white;

ย ย ย ย ย ย padding: 40px 30px;

ย ย ย ย ย ย text-align: center;

ย ย ย ย ย ย position: relative;

ย ย ย ย ย ย overflow: hidden;

ย ย ย ย }



ย ย ย ย .header::before {

ย ย ย ย ย ย content: '';

ย ย ย ย ย ย position: absolute;

ย ย ย ย ย ย top: 0;

ย ย ย ย ย ย left: 0;

ย ย ย ย ย ย right: 0;

ย ย ย ย ย ย bottom: 0;

ย ย ย ย ย ย background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23dc2626' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;

ย ย ย ย ย ย animation: float 20s ease-in-out infinite;

ย ย ย ย }



ย ย ย ย @keyframes float {

ย ย ย ย ย ย 0%, 100% { transform: translateY(0px); }

ย ย ย ย ย ย 50% { transform: translateY(-10px); }

ย ย ย ย }



ย ย ย ย .header h1 {

ย ย ย ย ย ย font-size: 2.2em;

ย ย ย ย ย ย margin-bottom: 8px;

ย ย ย ย ย ย font-weight: 700;

ย ย ย ย ย ย position: relative;

ย ย ย ย ย ย z-index: 2;

ย ย ย ย }



ย ย ย ย .header p {

ย ย ย ย ย ย font-size: 1.1em;

ย ย ย ย ย ย color: #dc2626;

ย ย ย ย ย ย font-weight: 600;

ย ย ย ย ย ย position: relative;

ย ย ย ย ย ย z-index: 2;

ย ย ย ย ย ย text-shadow: 0 2px 4px rgba(0,0,0,0.3);

ย ย ย ย }



ย ย ย ย .tabs {

ย ย ย ย ย ย display: flex;

ย ย ย ย ย ย background: rgba(248, 250, 252, 0.8);

ย ย ย ย ย ย backdrop-filter: blur(10px);

ย ย ย ย }



ย ย ย ย .tab {

ย ย ย ย ย ย flex: 1;

ย ย ย ย ย ย padding: 18px;

ย ย ย ย ย ย text-align: center;

ย ย ย ย ย ย cursor: pointer;

ย ย ย ย ย ย border: none;

ย ย ย ย ย ย background: none;

ย ย ย ย ย ย font-size: 16px;

ย ย ย ย ย ย font-weight: 600;

ย ย ย ย ย ย transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);

ย ย ย ย ย ย color: #64748b;

ย ย ย ย ย ย position: relative;

ย ย ย ย }



ย ย ย ย .tab::after {

ย ย ย ย ย ย content: '';

ย ย ย ย ย ย position: absolute;

ย ย ย ย ย ย bottom: 0;

ย ย ย ย ย ย left: 50%;

ย ย ย ย ย ย width: 0;

ย ย ย ย ย ย height: 3px;

ย ย ย ย ย ย background: linear-gradient(90deg, #dc2626, #ef4444);

ย ย ย ย ย ย transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);

ย ย ย ย ย ย transform: translateX(-50%);

ย ย ย ย ย ย border-radius: 2px;

ย ย ย ย }



ย ย ย ย .tab.active {

ย ย ย ย ย ย color: #dc2626;

ย ย ย ย ย ย background: rgba(220, 38, 38, 0.05);

ย ย ย ย }



ย ย ย ย .tab.active::after {

ย ย ย ย ย ย width: 60%;

ย ย ย ย }



ย ย ย ย .tab:hover:not(.active) {

ย ย ย ย ย ย background: rgba(100, 116, 139, 0.05);

ย ย ย ย ย ย transform: translateY(-2px);

ย ย ย ย }



ย ย ย ย .content {

ย ย ย ย ย ย padding: 40px;

ย ย ย ย ย ย background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);

ย ย ย ย ย ย min-height: 500px;

ย ย ย ย }



ย ย ย ย .form-section {

ย ย ย ย ย ย background: white;

ย ย ย ย ย ย border-radius: 16px;

ย ย ย ย ย ย padding: 30px;

ย ย ย ย ย ย box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);

ย ย ย ย ย ย border: 1px solid rgba(226, 232, 240, 0.5);

ย ย ย ย ย ย margin-bottom: 20px;

ย ย ย ย }



ย ย ย ย .form-section h2 {

ย ย ย ย ย ย color: #1e293b;

ย ย ย ย ย ย margin-bottom: 25px;

ย ย ย ย ย ย font-size: 1.5em;

ย ย ย ย ย ย font-weight: 700;

ย ย ย ย ย ย display: flex;

ย ย ย ย ย ย align-items: center;

ย ย ย ย ย ย gap: 10px;

ย ย ย ย }

ย ย ย ยย

ย ย ย ย .list-header {

ย ย ย ย ย ย display: flex;

ย ย ย ย ย ย justify-content: space-between;

ย ย ย ย ย ย align-items: center;

ย ย ย ย ย ย margin-bottom: 25px;

ย ย ย ย ย ย gap: 10px;

ย ย ย ย }

ย ย ย ยย

ย ย ย ย .list-header h2 {

ย ย ย ย ย ย margin: 0;

ย ย ย ย ย ย margin-bottom: 0px;

ย ย ย ย }



ย ย ย ย .search-container {

ย ย ย ย ย ย position: relative;

ย ย ย ย ย ย flex-grow: 1;

ย ย ย ย ย ย max-width: 350px;

ย ย ย ย }



ย ย ย ย .search-container input {

ย ย ย ย ย ย width: 100%;

ย ย ย ย ย ย padding: 12px 12px 12px 40px;

ย ย ย ย ย ย border: 2px solid #e5e7eb;

ย ย ย ย ย ย border-radius: 12px;

ย ย ย ย ย ย font-size: 16px;

ย ย ย ย ย ย transition: all 0.3s;

ย ย ย ย }



ย ย ย ย .search-container input:focus {

ย ย ย ย ย ย outline: none;

ย ย ย ย ย ย border-color: #dc2626;

ย ย ย ย ย ย box-shadow: 0 0 0 4px rgba(220, 38, 38, 0.1);

ย ย ย ย }

ย ย ย ยย

ย ย ย ย .search-container svg {

ย ย ย ย ย ย position: absolute;

ย ย ย ย ย ย left: 12px;

ย ย ย ย ย ย top: 50%;

ย ย ย ย ย ย transform: translateY(-50%);

ย ย ย ย ย ย color: #9ca3af;

ย ย ย ย }





ย ย ย ย .form-grid {

ย ย ย ย ย ย display: grid;

ย ย ย ย ย ย grid-template-columns: 1fr 1fr;

ย ย ย ย ย ย gap: 20px;

ย ย ย ย }



ย ย ย ย .form-group {

ย ย ย ย ย ย margin-bottom: 20px;

ย ย ย ย }



ย ย ย ย .form-group.full-width {

ย ย ย ย ย ย grid-column: 1 / -1;

ย ย ย ย }



ย ย ย ย .form-group label {

ย ย ย ย ย ย display: block;

ย ย ย ย ย ย margin-bottom: 8px;

ย ย ย ย ย ย font-weight: 600;

ย ย ย ย ย ย color: #374151;

ย ย ย ย ย ย font-size: 14px;

ย ย ย ย ย ย text-transform: uppercase;

ย ย ย ย ย ย letter-spacing: 0.5px;

ย ย ย ย }



ย ย ย ย .form-group input,

ย ย ย ย .form-group select,

ย ย ย ย .form-group textarea {

ย ย ย ย ย ย width: 100%;

ย ย ย ย ย ย padding: 14px 16px;

ย ย ย ย ย ย border: 2px solid #e5e7eb;

ย ย ย ย ย ย border-radius: 12px;

ย ย ย ย ย ย font-size: 16px;

ย ย ย ย ย ย transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

ย ย ย ย ย ย background: #fff;

ย ย ย ย ย ย color: #1f2937;

ย ย ย ย }



ย ย ย ย .form-group input:focus,

ย ย ย ย .form-group select:focus,

ย ย ย ย .form-group textarea:focus {

ย ย ย ย ย ย outline: none;

ย ย ย ย ย ย border-color: #dc2626;

ย ย ย ย ย ย box-shadow: 0 0 0 4px rgba(220, 38, 38, 0.1);

ย ย ย ย ย ย transform: translateY(-2px);

ย ย ย ย }



ย ย ย ย .time-slots {

ย ย ย ย ย ย display: grid;

ย ย ย ย ย ย grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));

ย ย ย ย ย ย gap: 12px;

ย ย ย ย ย ย margin-top: 15px;

ย ย ย ย }



ย ย ย ย .time-slot {

ย ย ย ย ย ย background: white;

ย ย ย ย ย ย border: 2px solid #e5e7eb;

ย ย ย ย ย ย border-radius: 12px;

ย ย ย ย ย ย padding: 12px;

ย ย ย ย ย ย text-align: center;

ย ย ย ย ย ย cursor: pointer;

ย ย ย ย ย ย transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

ย ย ย ย ย ย position: relative;

ย ย ย ย ย ย font-weight: 600;

ย ย ย ย }



ย ย ย ย .time-slot:hover {

ย ย ย ย ย ย border-color: #dc2626;

ย ย ย ย ย ย transform: translateY(-2px);

ย ย ย ย ย ย box-shadow: 0 4px 15px rgba(220, 38, 38, 0.2);

ย ย ย ย }



ย ย ย ย .time-slot.selected {

ย ย ย ย ย ย background: linear-gradient(135deg, #dc2626, #ef4444);

ย ย ย ย ย ย color: white;

ย ย ย ย ย ย border-color: #dc2626;

ย ย ย ย ย ย transform: translateY(-2px);

ย ย ย ย ย ย box-shadow: 0 6px 20px rgba(220, 38, 38, 0.3);

ย ย ย ย }



ย ย ย ย .time-slot.unavailable {

ย ย ย ย ย ย background: #f3f4f6;

ย ย ย ย ย ย color: #9ca3af;

ย ย ย ย ย ย cursor: not-allowed;

ย ย ย ย ย ย border-color: #e5e7eb;

ย ย ย ย }



ย ย ย ย .time-slot.unavailable:hover {

ย ย ย ย ย ย transform: none;

ย ย ย ย ย ย box-shadow: none;

ย ย ย ย ย ย border-color: #e5e7eb;

ย ย ย ย }



ย ย ย ย .availability-badge {

ย ย ย ย ย ย position: absolute;

ย ย ย ย ย ย top: -8px;

ย ย ย ย ย ย right: -8px;

ย ย ย ย ย ย background: #10b981;

ย ย ย ย ย ย color: white;

ย ย ย ย ย ย border-radius: 50%;

ย ย ย ย ย ย width: 20px;

ย ย ย ย ย ย height: 20px;

ย ย ย ย ย ย font-size: 11px;

ย ย ย ย ย ย display: flex;

ย ย ย ย ย ย align-items: center;

ย ย ย ย ย ย justify-content: center;

ย ย ย ย ย ย font-weight: bold;

ย ย ย ย }



ย ย ย ย .availability-badge.low {

ย ย ย ย ย ย background: #f59e0b;

ย ย ย ย }



ย ย ย ย .availability-badge.full {

ย ย ย ย ย ย background: #ef4444;

ย ย ย ย }



ย ย ย ย .btn {

ย ย ย ย ย ย background: linear-gradient(135deg, #dc2626, #ef4444);

ย ย ย ย ย ย color: white;

ย ย ย ย ย ย padding: 16px 32px;

ย ย ย ย ย ย border: none;

ย ย ย ย ย ย border-radius: 12px;

ย ย ย ย ย ย font-size: 16px;

ย ย ย ย ย ย font-weight: 600;

ย ย ย ย ย ย cursor: pointer;

ย ย ย ย ย ย transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

ย ย ย ย ย ย width: 100%;

ย ย ย ย ย ย margin-top: 20px;

ย ย ย ย ย ย text-transform: uppercase;

ย ย ย ย ย ย letter-spacing: 0.5px;

ย ย ย ย }



ย ย ย ย .btn:hover {

ย ย ย ย ย ย transform: translateY(-3px);

ย ย ย ย ย ย box-shadow: 0 10px 30px rgba(220, 38, 38, 0.3);

ย ย ย ย }



ย ย ย ย .btn:active {

ย ย ย ย ย ย transform: translateY(-1px);

ย ย ย ย }



ย ย ย ย .btn-danger {

ย ย ย ย ย ย background: linear-gradient(135deg, #ef4444, #f87171);

ย ย ย ย ย ย width: auto;

ย ย ย ย ย ย padding: 8px 16px;

ย ย ย ย ย ย font-size: 14px;

ย ย ย ย ย ย margin: 0;

ย ย ย ย }

ย ย ย ย .btn-alterar {

ย ย ย ย ย ย background: linear-gradient(135deg, #3b82f6, #60a5fa);

ย ย ย ย ย ย width: auto;

ย ย ย ย ย ย padding: 8px 16px;

ย ย ย ย ย ย font-size: 14px;

ย ย ย ย ย ย margin: 0;

ย ย ย ย }



ย ย ย ย .agendamento-card {

ย ย ย ย ย ย background: white;

ย ย ย ย ย ย border-radius: 16px;

ย ย ย ย ย ย padding: 25px;

ย ย ย ย ย ย margin-bottom: 20px;

ย ย ย ย ย ย box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);

ย ย ย ย ย ย border: 1px solid rgba(226, 232, 240, 0.5);

ย ย ย ย ย ย transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

ย ย ย ย ย ย position: relative;

ย ย ย ย ย ย overflow: hidden;

ย ย ย ย }



ย ย ย ย .agendamento-card::before {

ย ย ย ย ย ย content: '';

ย ย ย ย ย ย position: absolute;

ย ย ย ย ย ย top: 0;

ย ย ย ย ย ย left: 0;

ย ย ย ย ย ย width: 4px;

ย ย ย ย ย ย height: 100%;

ย ย ย ย ย ย background: linear-gradient(135deg, #dc2626, #ef4444);

ย ย ย ย }



ย ย ย ย .agendamento-card:hover {

ย ย ย ย ย ย transform: translateY(-4px);

ย ย ย ย ย ย box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);

ย ย ย ย }



ย ย ย ย .agendamento-header {

ย ย ย ย ย ย display: flex;

ย ย ย ย ย ย justify-content: space-between;

ย ย ย ย ย ย align-items: center;

ย ย ย ย ย ย margin-bottom: 15px;

ย ย ย ย }



ย ย ย ย .agendamento-cliente {

ย ย ย ย ย ย font-size: 1.3em;

ย ย ย ย ย ย font-weight: 700;

ย ย ย ย ย ย color: #1e293b;

ย ย ย ย }



ย ย ย ย .agendamento-data {

ย ย ย ย ย ย background: linear-gradient(135deg, #dc2626, #ef4444);

ย ย ย ย ย ย color: white;

ย ย ย ย ย ย padding: 8px 16px;

ย ย ย ย ย ย border-radius: 20px;

ย ย ย ย ย ย font-size: 14px;

ย ย ย ย ย ย font-weight: 600;

ย ย ย ย ย ย box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3);

ย ย ย ย }

ย ย ย ยย

ย ย ย ย .agendamentos-dia {

ย ย ย ย ย ย background-color: #f1f5f9;

ย ย ย ย ย ย border-radius: 16px;

ย ย ย ย ย ย padding: 20px;

ย ย ย ย ย ย margin-bottom: 30px;

ย ย ย ย ย ย box-shadow: 0 4px 20px rgba(0,0,0,0.05);

ย ย ย ย }

ย ย ย ยย

ย ย ย ย .agendamentos-dia h3 {

ย ย ย ย ย ย display: flex;

ย ย ย ย ย ย justify-content: space-between;

ย ย ย ย ย ย align-items: center;

ย ย ย ย ย ย font-size: 1.4em;

ย ย ย ย ย ย color: #1e293b;

ย ย ย ย ย ย margin-bottom: 20px;

ย ย ย ย }



ย ย ย ย .agendamentos-dia h3 .trajes-count {

ย ย ย ย ย ย display: inline-block;

ย ย ย ย ย ย background: linear-gradient(135deg, #10b981, #34d399);

ย ย ย ย ย ย color: white;

ย ย ย ย ย ย padding: 6px 12px;

ย ย ย ย ย ย border-radius: 20px;

ย ย ย ย ย ย font-size: 0.9em;

ย ย ย ย ย ย font-weight: 600;

ย ย ย ย }



ย ย ย ย .agendamentos-dia h3 .btn-group {

ย ย ย ย ย ย display: flex;

ย ย ย ย ย ย gap: 10px;

ย ย ย ย ย ย align-items: center;

ย ย ย ย }

ย ย ย ยย

ย ย ย ย .btn-download-pdf {

ย ย ย ย ย ย background: linear-gradient(135deg, #1e40af, #3b82f6);

ย ย ย ย ย ย color: white;

ย ย ย ย ย ย padding: 8px 16px;

ย ย ย ย ย ย border: none;

ย ย ย ย ย ย border-radius: 12px;

ย ย ย ย ย ย font-size: 14px;

ย ย ย ย ย ย font-weight: 600;

ย ย ย ย ย ย cursor: pointer;

ย ย ย ย ย ย transition: all 0.3s;

ย ย ย ย }

ย ย ย ยย

ย ย ย ย .btn-download-pdf:hover {

ย ย ย ย ย ย background: linear-gradient(135deg, #3b82f6, #60a5fa);

ย ย ย ย ย ย transform: translateY(-2px);

ย ย ย ย }

ย ย ย ยย

ย ย ย ย .whatsapp-icon {

ย ย ย ย ย ย color: #25D366;

ย ย ย ย ย ย margin-left: 10px;

ย ย ย ย ย ย font-size: 20px;

ย ย ย ย ย ย text-decoration: none;

ย ย ย ย }

ย ย ย ย .whatsapp-icon:hover {

ย ย ย ย ย ย transform: scale(1.1);

ย ย ย ย ย ย transition: transform 0.2s;

ย ย ย ย }



ย ย ย ย .agendamento-info {

ย ย ย ย ย ย display: grid;

ย ย ย ย ย ย grid-template-columns: 1fr 1fr;

ย ย ย ย ย ย gap: 15px;

ย ย ย ย ย ย margin: 15px 0;

ย ย ย ย }



ย ย ย ย .info-item {

ย ย ย ย ย ย font-size: 14px;

ย ย ย ย ย ย color: #64748b;

ย ย ย ย ย ย display: flex;

ย ย ย ย ย ย align-items: center;

ย ย ย ย ย ย gap: 8px;

ย ย ย ย }



ย ย ย ย .info-item strong {

ย ย ย ย ย ย color: #374151;

ย ย ย ย }



ย ย ย ย .status {

ย ย ย ย ย ย display: inline-flex;

ย ย ย ย ย ย align-items: center;

ย ย ย ย ย ย padding: 6px 14px;

ย ย ย ย ย ย border-radius: 20px;

ย ย ย ย ย ย font-size: 12px;

ย ย ย ย ย ย font-weight: 600;

ย ย ย ย ย ย text-transform: uppercase;

ย ย ย ย ย ย letter-spacing: 0.5px;

ย ย ย ย }



ย ย ย ย .status.agendado {

ย ย ย ย ย ย background: linear-gradient(135deg, #3b82f6, #60a5fa);

ย ย ย ย ย ย color: white;

ย ย ย ย }

ย ย ย ยย

ย ย ย ย .status.aguardando-montagem {

ย ย ย ย ย ย background-color: #8B0000; /* Vermelho Sangue */

ย ย ย ย ย ย color: white;

ย ย ย ย }



ย ย ย ย .status.traje-pronto {

ย ย ย ย ย ย background-color: #228B22; /* Verde */

ย ย ย ย ย ย color: white;

ย ย ย ย }



ย ย ย ย .status.barra {

ย ย ย ย ย ย background-color: #3f51b5; /* Azul */

ย ย ย ย ย ย color: white;

ย ย ย ย }



ย ย ย ย .status.costura {

ย ย ย ย ย ย background-color: #ff9800; /* Laranja */

ย ย ย ย ย ย color: white;

ย ย ย ย }

ย ย ย ยย

ย ย ย ย .status.passacao {

ย ย ย ย ย ย background-color: #9c27b0; /* Roxo */

ย ย ย ย ย ย color: white;

ย ย ย ย }



ย ย ย ย .status.lavando {

ย ย ย ย ย ย background-color: #607d8b; /* Cinza Chumbo */

ย ย ย ย ย ย color: white;

ย ย ย ย }



ย ย ย ย .status.concluido {

ย ย ย ย ย ย background: linear-gradient(135deg, #10b981, #34d399);

ย ย ย ย ย ย color: white;

ย ย ย ย }



ย ย ย ย .status.cancelado {

ย ย ย ย ย ย background: linear-gradient(135deg, #ef4444, #f87171);

ย ย ย ย ย ย color: white;

ย ย ย ย }



ย ย ย ย .loading {

ย ย ย ย ย ย text-align: center;

ย ย ย ย ย ย padding: 60px;

ย ย ย ย ย ย color: #64748b;

ย ย ย ย ย ย font-size: 18px;

ย ย ย ย }



ย ย ย ย @keyframes spin {

ย ย ย ย ย ย 0% { transform: rotate(0deg); }

ย ย ย ย ย ย 100% { transform: rotate(360deg); }

ย ย ย ย }



ย ย ย ย .error, .success {

ย ย ย ย ย ย padding: 20px;

ย ย ย ย ย ย border-radius: 12px;

ย ย ย ย ย ย margin-bottom: 20px;

ย ย ย ย ย ย font-weight: 600;

ย ย ย ย ย ย display: flex;

ย ย ย ย ย ย align-items: center;

ย ย ย ย ย ย gap: 10px;

ย ย ย ย }



ย ย ย ย .error {

ย ย ย ย ย ย background: linear-gradient(135deg, #fef2f2, #fee2e2);

ย ย ย ย ย ย color: #dc2626;

ย ย ย ย ย ย border: 2px solid #fecaca;

ย ย ย ย }



ย ย ย ย .success {

ย ย ย ย ย ย background: linear-gradient(135deg, #f0fdf4, #dcfce7);

ย ย ย ย ย ย color: #16a34a;

ย ย ย ย ย ย border: 2px solid #bbf7d0;

ย ย ย ย }



ย ย ย ย .config-section {

ย ย ย ย ย ย background: white;

ย ย ย ย ย ย border-radius: 16px;

ย ย ย ย ย ย padding: 30px;

ย ย ย ย ย ย margin-bottom: 25px;

ย ย ย ย ย ย box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);

ย ย ย ย ย ย border: 1px solid rgba(226, 232, 240, 0.5);

ย ย ย ย }



ย ย ย ย .config-section h3 {

ย ย ย ย ย ย color: #1e293b;

ย ย ย ย ย ย margin-bottom: 20px;

ย ย ย ย ย ย font-size: 1.2em;

ย ย ย ย ย ย font-weight: 700;

ย ย ย ย }



ย ย ย ย .setup-instructions {

ย ย ย ย ย ย background: linear-gradient(135deg, #eff6ff, #dbeafe);

ย ย ย ย ย ย border-left: 4px solid #3b82f6;

ย ย ย ย ย ย padding: 25px;

ย ย ย ย ย ย margin-bottom: 25px;

ย ย ย ย ย ย border-radius: 12px;

ย ย ย ย }



ย ย ย ย .setup-instructions h3 {

ย ย ย ย ย ย color: #1e40af;

ย ย ย ย ย ย margin-bottom: 15px;

ย ย ย ย }



ย ย ย ย .setup-instructions p,

ย ย ย ย .setup-instructions ol,

ย ย ย ย .setup-instructions li {

ย ย ย ย ย ย color: #1e3a8a;

ย ย ย ย }



ย ย ย ย .hidden {

ย ย ย ย ย ย display: none;

ย ย ย ย }



ย ย ย ย .day-selector {

ย ย ย ย ย ย display: flex;

ย ย ย ย ย ย gap: 10px;

ย ย ย ย ย ย margin-bottom: 20px;

ย ย ย ย ย ย flex-wrap: wrap;

ย ย ย ย }



ย ย ย ย .day-btn {

ย ย ย ย ย ย padding: 10px 20px;

ย ย ย ย ย ย border: 2px solid #e5e7eb;

ย ย ย ย ย ย background: white;

ย ย ย ย ย ย border-radius: 10px;

ย ย ย ย ย ย cursor: pointer;

ย ย ย ย ย ย font-weight: 600;

ย ย ย ย ย ย transition: all 0.3s;

ย ย ย ย ย ย color: #64748b;

ย ย ย ย }



ย ย ย ย .day-btn.active {

ย ย ย ย ย ย background: linear-gradient(135deg, #dc2626, #ef4444);

ย ย ย ย ย ย color: white;

ย ย ย ย ย ย border-color: #dc2626;

ย ย ย ย }



ย ย ย ย .day-btn:hover:not(.active) {

ย ย ย ย ย ย border-color: #dc2626;

ย ย ย ย ย ย color: #dc2626;

ย ย ย ย }



ย ย ย ย @media (max-width: 768px) {

ย ย ย ย ย ย .container {

ย ย ย ย ย ย ย ย margin: 10px;

ย ย ย ย ย ย ย ย border-radius: 16px;

ย ย ย ย ย ย }



ย ย ย ย ย ย .header {

ย ย ย ย ย ย ย ย padding: 30px 20px;

ย ย ย ย ย ย }



ย ย ย ย ย ย .content {

ย ย ย ย ย ย ย ย padding: 25px;

ย ย ย ย ย ย }



ย ย ย ย ย ย .form-grid {

ย ย ย ย ย ย ย ย grid-template-columns: 1fr;

ย ย ย ย ย ย }



ย ย ย ย ย ย .agendamento-info {

ย ย ย ย ย ย ย ย grid-template-columns: 1fr;

ย ย ย ย ย ย }



ย ย ย ย ย ย .time-slots {

ย ย ย ย ย ย ย ย grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));

ย ย ย ย ย ย ย ย gap: 8px;

ย ย ย ย ย ย }



ย ย ย ย ย ย .day-selector {

ย ย ย ย ย ย ย ย justify-content: center;

ย ย ย ย ย ย }

ย ย ย ย }



ย ย ย ย /* Estilos para a modal de ediรงรฃo */

ย ย ย ย .modal {

ย ย ย ย ย ย display: none;

ย ย ย ย ย ย position: fixed;

ย ย ย ย ย ย z-index: 1000;

ย ย ย ย ย ย left: 0;

ย ย ย ย ย ย top: 0;

ย ย ย ย ย ย width: 100%;

ย ย ย ย ย ย height: 100%;

ย ย ย ย ย ย overflow: auto;

ย ย ย ย ย ย background-color: rgba(0, 0, 0, 0.6);

ย ย ย ย ย ย justify-content: center;

ย ย ย ย ย ย align-items: center;

ย ย ย ย }



ย ย ย ย .modal-content {

ย ย ย ย ย ย background-color: #fefefe;

ย ย ย ย ย ย padding: 20px;

ย ย ย ย ย ย border-radius: 12px;

ย ย ย ย ย ย width: 90%;

ย ย ย ย ย ย max-width: 500px;

ย ย ย ย ย ย box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);

ย ย ย ย ย ย position: relative;

ย ย ย ย }



ย ย ย ย .modal-content h3 {

ย ย ย ย ย ย margin-top: 0;

ย ย ย ย ย ย margin-bottom: 20px;

ย ย ย ย ย ย color: #1e293b;

ย ย ย ย }



ย ย ย ย .close-button {

ย ย ย ย ย ย color: #aaa;

ย ย ย ย ย ย position: absolute;

ย ย ย ย ย ย top: 10px;

ย ย ย ย ย ย right: 20px;

ย ย ย ย ย ย font-size: 28px;

ย ย ย ย ย ย font-weight: bold;

ย ย ย ย ย ย cursor: pointer;

ย ย ย ย }



ย ย ย ย .close-button:hover {

ย ย ย ย ย ย color: black;

ย ย ย ย }



ย ย ย ย #editTimeSlots {

ย ย ย ย ย ย margin-top: 15px;

ย ย ย ย }

ย ย </style>

ย ย <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

ย ย <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>

ย ย <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

ย ย <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

</head>

<body>

ย ย <div class="container">

ย ย ย ย <div class="header">

ย ย ย ย ย ย <h1>Sistema de Agendamentos</h1>

ย ย ย ย ย ย <p>Veste seu momento!</p>

ย ย ย ย </div>



ย ย ย ย <div class="tabs">

ย ย ย ย ย ย <button class="tab active" onclick="showTab('novo')">โจ Novo Agendamento</button>

ย ย ย ย ย ย <button class="tab" onclick="showTab('lista')">๐ Agendamentos</button>

ย ย ย ย ย ย <button class="tab" onclick="showTab('concluidos')">โ Concluรญdos</button>

ย ย ย ย </div>



ย ย ย ย <div class="content">

ย ย ย ย ย ย <div id="novo-tab">

ย ย ย ย ย ย ย ย <div class="form-section">

ย ย ย ย ย ย ย ย ย ย <div class="list-header" style="align-items: flex-start;">

ย ย ย ย ย ย ย ย ย ย ย ย <h2>โจ Novo Agendamento</h2>

ย ย ย ย ย ย ย ย ย ย ย ย <button class="btn btn-alterar" onclick="openRegrasModal()">Regras de Agendamento</button>

ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย <div id="message-area"></div>

ย ย ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย ย ย <form id="agendamentoForm">

ย ย ย ย ย ย ย ย ย ย ย ย <div class="form-grid">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="form-group">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <label for="cliente">๐ค Nome do Cliente</label>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <input type="text" id="cliente" required placeholder="Digite o nome completo">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>



ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="form-group">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <label for="telefone">๐ Telefone</label>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <input type="tel" id="telefone" required placeholder="Apenas nรบmeros, ex: 34991999999">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>



ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="form-group">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <label for="funcionario">๐จโ๐ผ Atendente</label>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <select id="funcionario" required>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="">Selecione o atendente</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="Ana">Ana</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="Vitรณria">Vitรณria</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="Luiz Pedro">Luiz Pedro</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="Lorrayne">Lorrayne</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="Maykol">Maykol</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="Fillipy">Fillipy</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="Renato">Renato</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="Carol">Carol</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="Augusto">Augusto</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="Izabella">Izabella</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="Giovana">Giovana</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="Gabriela">Gabriela</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="Jaqueline">Jaqueline</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </select>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>



ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="form-group">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <label for="servico">๐ผ Serviรงo</label>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <select id="servico" required>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="">Selecione o serviรงo</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="Atendimento">Atendimento</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="Primeira Prova Vestido">Primeira Prova Vestido</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="Retirada Vestido">Retirada Vestido</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <option value="Prova">Prova</option>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </select>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>



ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="form-group" id="email-field-group" style="display: none;">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <label for="email">๐ง Email</label>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <input type="email" id="email" placeholder="cliente@email.com">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>



ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="form-group full-width">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <label>๐ Selecione o Mรชs e Ano</label>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <button type="button" class="btn" style="width: auto; padding: 10px; font-size: 1em; margin: 0;" onclick="changeMonth(-1)">&#9664; Anterior</button>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <span id="currentMonthYear" style="font-weight: 600; font-size: 1.2em; flex-grow: 1; text-align: center; color: #1e293b;"></span>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <button type="button" class="btn" style="width: auto; padding: 10px; font-size: 1em; margin: 0;" onclick="changeMonth(1)">Prรณximo &#9654;</button>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="form-group full-width">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <label>๐ Selecione o Dia</label>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="day-selector" id="daySelector">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>



ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="form-group full-width">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <label>๐ Horรกrios Disponรญveis</label>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="time-slots" id="timeSlots">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="loading">Selecione um dia para ver os horรกrios</div>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>



ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="form-group full-width">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <label for="observacoes">๐ Observaรงรตes</label>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <textarea id="observacoes" rows="3" placeholder="Observaรงรตes adicionais (opcional)"></textarea>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย ย ย </div>



ย ย ย ย ย ย ย ย ย ย ย ย <button type="submit" class="btn">โ Confirmar Agendamento</button>

ย ย ย ย ย ย ย ย ย ย </form>

ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย </div>



ย ย ย ย ย ย <div id="lista-tab" class="hidden">

ย ย ย ย ย ย ย ย <div class="form-section">

ย ย ย ย ย ย ย ย ย ย <div class="list-header">

ย ย <h2>๐ Lista de Agendamentos</h2>

ย ย <div style="display: flex; align-items: center; gap: 10px;">

ย ย ย ย <input type="date" id="date-filter" onchange="loadAgendamentos()">

ย ย ย ย <div class="search-container">

ย ย ย ย ย ย <input type="text" id="search-input" placeholder="Pesquisar por cliente..." oninput="filterAgendamentos(this.value)">

ย ย ย ย ย ย <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>

ย ย ย ย </div>

ย ย </div>

</div>

ย ย ย ย ย ย ย ย ย ย <div id="agendamentos-list">

ย ย ย ย ย ย ย ย ย ย ย ย <div class="loading">Carregando agendamentos...</div>

ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย </div>

ย ย ย ย ย ยย

ย ย ย ย ย ย <div id="concluidos-tab" class="hidden">

ย ย ย ย ย ย ย ย <div class="form-section">

ย ย ย ย ย ย ย ย ย ย <div class="list-header">

ย ย ย ย ย ย ย ย ย ย ย ย <h2>โ Agendamentos Concluรญdos</h2>

ย ย ย ย ย ย ย ย ย ย ย ย <div class="search-container">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย <input type="text" id="search-input-concluidos" placeholder="Pesquisar por cliente..." oninput="filterConcluidos(this.value)">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>

ย ย ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย <div id="concluidos-list">

ย ย ย ย ย ย ย ย ย ย ย ย <div class="loading">Carregando agendamentos concluรญdos...</div>

ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย </div>

ย ย ย ย </div>

ย ย </div>



ย ย <div id="edit-modal" class="modal">

ย ย ย ย <div class="modal-content">

ย ย ย ย ย ย <span class="close-button" onclick="closeEditModal()">&times;</span>

ย ย ย ย ย ย <h3>Alterar Agendamento</h3>

ย ย ย ย ย ย <div id="edit-message-area"></div>

ย ย ย ย ย ย <div id="edit-agendamento-details"></div>

ย ย ย ย ย ย <div class="form-grid">

ย ย ย ย ย ย ย ย <div class="form-group full-width">

ย ย ย ย ย ย ย ย ย ย <label>๐ Nova Data</label>

ย ย ย ย ย ย ย ย ย ย <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">

ย ย ย ย ย ย ย ย ย ย ย ย <button type="button" class="btn" style="width: auto; padding: 10px; font-size: 1em; margin: 0;" onclick="changeEditMonth(-1)">&#9664; Anterior</button>

ย ย ย ย ย ย ย ย ย ย ย ย <span id="editCurrentMonthYear" style="font-weight: 600; font-size: 1.2em; flex-grow: 1; text-align: center; color: #1e293b;"></span>

ย ย ย ย ย ย ย ย ย ย ย ย <button type="button" class="btn" style="width: auto; padding: 10px; font-size: 1em; margin: 0;" onclick="changeEditMonth(1)">Prรณximo &#9654;</button>

ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย <div class="day-selector" id="editDaySelector"></div>

ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย <div class="form-group full-width">

ย ย ย ย ย ย ย ย ย ย <label>๐ Novos Horรกrios Disponรญveis</label>

ย ย ย ย ย ย ย ย ย ย <div class="time-slots" id="editTimeSlots"></div>

ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย </div>

ย ย ย ย ย ย <button type="button" class="btn" onclick="saveEditedAppointment()">Salvar Alteraรงรตes</button>

ย ย ย ย </div>

ย ย </div>

ย ยย

ย ย <div id="regras-modal" class="modal">

ย ย ย ย <div class="modal-content">

ย ย ย ย ย ย <span class="close-button" onclick="closeRegrasModal()">&times;</span>

ย ย ย ย ย ย <h3>๐ Documento โ Horรกrios e Regras de Provas na Mr. Jack</h3>

ย ย ย ย ย ย <div style="font-size: 1em; color: #374151;">

ย ย ย ย ย ย ย ย <p><strong>๐ฏ Objetivo</strong><br>Definir horรกrios ideais e exceรงรตes para agendamento de provas (masculino e feminino), garantindo organizaรงรฃo, qualidade nos ajustes e presenรงa da costureira responsรกvel.</p>

ย ย ย ย ย ย ย ย <hr style="margin: 15px 0; border: 0; border-top: 1px solid #e5e7eb;">

ย ย ย ย ย ย ย ย <p><strong>โฐ 2. Regras Gerais de Horรกrios</strong></p>

ย ย ย ย ย ย ย ย <p>โ Horรกrios ideais para agendamento:<br>

ย ย ย ย ย ย ย ย โข ๐ 10h da manhรฃ<br>

ย ย ย ย ย ย ย ย โข โณ Das 14h รs 17h</p>

ย ย ย ย ย ย ย ย <p>โ๏ธ Horรกrios a evitar:<br>

ย ย ย ย ย ย ย ย โข ๐ซ Antes das 10h โ precisamos de tempo para organizar trajes e ajustes pendentes da manhรฃ.<br>

ย ย ย ย ย ย ย ย โข ๐ฝ Das 11h รs 14h โ intervalo de almoรงo da equipe e da costureira.<br>

ย ย ย ย ย ย ย ย โข โ Apรณs as 17h โ pouco tempo para ajustes antes do fim do expediente.</p>

ย ย ย ย ย ย ย ย <p>๐ก Obs.: Esses horรกrios โa evitarโ podem ser usados apenas quando nรฃo houver outra opรงรฃo, em casos de alto fluxo de agendamentos.</p>

ย ย ย ย ย ย ย ย <hr style="margin: 15px 0; border: 0; border-top: 1px solid #e5e7eb;">

ย ย ย ย ย ย ย ย <p><strong>๐คต 3. Provas Masculinas</strong></p>

ย ย ย ย ย ย ย ย <p>โข Todos os clientes do masculino experimentam o traje na semana do evento, nos horรกrios ideais acima.<br>

ย ย ย ย ย ย ย ย โข ๐ Dias permitidos:<br>

ย ย ย ย ย ย ย ย โข โ Terรงa a sexta-feira<br>

ย ย ย ย ย ย ย ย โข ๐ซ Segunda-feira: nรฃo agendar.<br>

ย ย ย ย ย ย ย ย โข โ๏ธ Terรงa de manhรฃ: evitar (trajes podem estar retornando e precisam de higienizaรงรฃo).<br>

ย ย ย ย ย ย ย ย โข Sรกbado: nรฃo realizamos provas masculinas (somente exceรงรตes com autorizaรงรฃo da gerรชncia).<br>

ย ย ย ย ย ย ย ย โข Ajustes comuns: barra, acinturamento, comprimento de manga e detalhes adicionais.</p>

ย ย ย ย ย ย ย ย <hr style="margin: 15px 0; border: 0; border-top: 1px solid #e5e7eb;">

ย ย ย ย ย ย ย ย <p><strong>๐ 4. Provas Femininas</strong></p>

ย ย ย ย ย ย ย ย <p>โข ๐ Primeira prova: sempre duas semanas antes do evento<br>

ย ย ย ย ย ย ย ย โข Agendar no inรญcio da semana.<br>

ย ย ย ย ย ย ย ย โข Evitar horรกrio de almoรงo da costureira responsรกvel (atualmente, Ana).<br>

ย ย ย ย ย ย ย ย โข Ana deve estar presente em todas as provas de vestidos.<br>

ย ย ย ย ย ย ย ย โข ๐ Segunda prova (semana do evento):<br>

ย ย ย ย ย ย ย ย โข Preferรชncia: terรงa ou quarta-feira.<br>

ย ย ย ย ย ย ย ย โข Evitar: sexta-feira (risco alto de atrasos).<br>

ย ย ย ย ย ย ย ย โข Quinta-feira: apenas de manhรฃ, em รบltimo caso.<br>

ย ย ย ย ย ย ย ย โข ๐ Importante: todas as clientes devem trazer o sapato ou salto que usarรฃo no evento para prova de comprimento.</p>

ย ย ย ย ย ย ย ย <hr style="margin: 15px 0; border: 0; border-top: 1px solid #e5e7eb;">

ย ย ย ย ย ย ย ย <p><strong>๐ 5. Motivos das Regras</strong></p>

ย ย ย ย ย ย ย ย <p>โข ๐ Organizaรงรฃo interna: tempo para higienizar, passar e preparar trajes.<br>

ย ย ย ย ย ย ย ย โข ๐ฉโ๐ง Disponibilidade da costureira: evitar almoรงo e final de expediente.<br>

ย ย ย ย ย ย ย ย โข โฑ Prevenรงรฃo de atrasos: manter prazo seguro para ajustes.<br>

ย ย ย ย ย ย ย ย โข ๐ค Qualidade no atendimento: garantir provas completas e sem pressa.</p>

ย ย ย ย ย ย </div>

ย ย ย ย </div>

ย ย </div>



ย ย <script>

ย ย ย ย // Variรกveis globais

ย ย ย ย let db = null;

ย ย ย ย let isConfigured = false;

ย ย ย ย let selectedDate = null;

ย ย ย ย let selectedTime = null;

ย ย ย ย let editAppointmentId = null;

ย ย ย ย let editCalendarDate = new Date();

ย ย ย ย let currentCalendarDate = new Date();

ย ย ย ย let allAppointments = []; // Armazenarรก todos os agendamentos para a pesquisa

ย ย ย ย let concluidedAppointments = [];

ย ย ย ย let nonConcludedAppointments = [];



ย ย ย ย // Constante global para a data/hora atual (usada para horรกrios passados)

ย ย ย ย const NOW_DATE_GLOBAL = new Date();ย

ย ย ย ย NOW_DATE_GLOBAL.setSeconds(0, 0); // Zera segundos e milissegundos para precisรฃo da meia hora



ย ย ย ย // Horรกrios de funcionamento

ย ย ย ย const WORKING_HOURS = {

ย ย ย ย ย ย start: '08:00',

ย ย ย ย ย ย end: '17:00',

ย ย ย ย ย ย workingDays: [1, 2, 3, 4, 5, 6]

ย ย ย ย };

ย ย ย ยย

ย ย ย ย const MAX_APPOINTMENTS_PER_HOUR = 4;

ย ย ย ย const MAX_APPOINTMENTS_SATURDAY = 1;ย

ย ย ย ยย

ย ย ย ย // Feriados a serem removidos

ย ย ย ย const HOLIDAYS = ['2025-08-15'];

ย ย ย ยย

ย ย ย ย // Tipos de serviรงo que contam como "trajes"

ย ย ย ย const DRESS_SERVICES = ['Prova', 'Primeira Prova Vestido', 'Retirada Vestido'];



ย ย ย ย // Funรงรตes do Firebase

ย ย ย ย const FIREBASE_CONFIG = {

ย ย ย ย ย ย apiKey: "AIzaSyBaDBgoPIBCyG1IFAuvIpoJ26P88tTu6dQ",

ย ย ย ย ย ย authDomain: "agenda-mr-jack.firebaseapp.com",

ย ย ย ย ย ย projectId: "agenda-mr-jack"

ย ย ย ย };

ย ย ย ยย

ย ย ย ย function initFirebase() {

ย ย ย ย ย ย if (!firebase.apps.length) {

ย ย ย ย ย ย ย ย firebase.initializeApp(FIREBASE_CONFIG);

ย ย ย ย ย ย }

ย ย ย ย ย ย db = firebase.firestore();

ย ย ย ย ย ย isConfigured = true;

ย ย ย ย ย ย console.log('Firebase inicializado com sucesso!');

ย ย ย ย }



ย ย ย ย // Funรงรฃo para mostrar abas

ย ย ย ย function showTab(tabName) {

ย ย ย ย ย ย document.querySelectorAll('[id$="-tab"]').forEach(tab => {

ย ย ย ย ย ย ย ย tab.classList.add('hidden');

ย ย ย ย ย ย });

ย ย ย ย ย ยย

ย ย ย ย ย ย document.querySelectorAll('.tab').forEach(btn => {

ย ย ย ย ย ย ย ย btn.classList.remove('active');

ย ย ย ย ย ย });

ย ย ย ย ย ยย

ย ย ย ย ย ย document.getElementById(tabName + '-tab').classList.remove('hidden');

ย ย ย ย ย ย const clickedTabButton = Array.from(document.querySelectorAll('.tab')).find(btn => btn.getAttribute('onclick').includes(`'${tabName}'`));

ย ย ย ย ย ย if (clickedTabButton) {

ย ย ย ย ย ย ย ย clickedTabButton.classList.add('active');

ย ย ย ย ย ย }

ย ย ย ย ย ยย

ย ย ย ย ย ย if (tabName === 'lista' || tabName === 'concluidos') {

ย ย ย ย ย ย ย ย loadAgendamentos();

ย ย ย ย ย ย } else if (tabName === 'novo') {

ย ย ย ย ย ย ย ย currentCalendarDate = new Date();ย

ย ย ย ย ย ย ย ย generateDaySelector();ย

ย ย ย ย ย ย }

ย ย ย ย }



ย ย ย ย // Carregar configuraรงรฃo ao iniciar

ย ย ย ย document.addEventListener('DOMContentLoaded', () => {

ย ย ย ย ย ย initFirebase();

ย ย ย ย ย ย showTab('novo');ย

ย ย ย ย ย ย document.querySelector('.tab[onclick="showTab(\'novo\')"]').classList.add('active');

ย ย ย ย });



ย ย ย ย // Funรงรฃo para mostrar mensagens

ย ย ย ย function showMessage(message, type = 'success', targetElement = 'message-area') {

ย ย ย ย ย ย const messageArea = document.getElementById(targetElement);

ย ย ย ย ย ย messageArea.innerHTML = `<div class="${type}">${message}</div>`;

ย ย ย ย ย ยย

ย ย ย ย ย ย setTimeout(() => {

ย ย ย ย ย ย ย ย messageArea.innerHTML = '';

ย ย ย ย ย ย }, 5000);

ย ย ย ย }

ย ย ย ยย

ย ย ย ย const TODAY_DATE = new Date();

ย ย ย ย TODAY_DATE.setHours(0, 0, 0, 0);



ย ย ย ย function changeMonth(delta) {

ย ย ย ย ย ย currentCalendarDate.setMonth(currentCalendarDate.getMonth() + delta);

ย ย ย ย ย ยย

ย ย ย ย ย ย const fiveYearsFromNow = new Date(TODAY_DATE);

ย ย ย ย ย ย fiveYearsFromNow.setFullYear(TODAY_DATE.getFullYear() + 5);



ย ย ย ย ย ย if (currentCalendarDate.getFullYear() < TODAY_DATE.getFullYear() ||

ย ย ย ย ย ย ย ย (currentCalendarDate.getFullYear() === TODAY_DATE.getFullYear() && currentCalendarDate.getMonth() < TODAY_DATE.getMonth())) {

ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย currentCalendarDate = new Date(TODAY_DATE.getFullYear(), TODAY_DATE.getMonth(), 1);

ย ย ย ย ย ย }

ย ย ย ย ย ยย

ย ย ย ย ย ย if (currentCalendarDate > fiveYearsFromNow) {

ย ย ย ย ย ย ย ย currentCalendarDate = fiveYearsFromNow;

ย ย ย ย ย ย ย ย currentCalendarDate.setDate(1);

ย ย ย ย ย ย }



ย ย ย ย ย ย selectedDate = null;ย

ย ย ย ย ย ย generateDaySelector();ย

ย ย ย ย }



ย ย ย ย // Funรงรฃo para gerar seletor de dias

ย ย ย ย function generateDaySelector() {

ย ย ย ย ย ย const daySelector = document.getElementById('daySelector');

ย ย ย ย ย ย const currentMonthYearSpan = document.getElementById('currentMonthYear');

ย ย ย ย ย ย daySelector.innerHTML = '';

ย ย ย ย ย ยย

ย ย ย ย ย ย const monthNames = ['Janeiro', 'Fevereiro', 'Marรงo', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];

ย ย ย ย ย ย const daysOfWeek = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sรกb'];



ย ย ย ย ย ย currentMonthYearSpan.textContent = `${monthNames[currentCalendarDate.getMonth()]} de ${currentCalendarDate.getFullYear()}`;



ย ย ย ย ย ย const lastDayOfMonth = new Date(currentCalendarDate.getFullYear(), currentCalendarDate.getMonth() + 1, 0);



ย ย ย ย ย ย let firstDayFound = false;



ย ย ย ย ย ย for (let i = 1; i <= lastDayOfMonth.getDate(); i++) {

ย ย ย ย ย ย ย ย const date = new Date(currentCalendarDate.getFullYear(), currentCalendarDate.getMonth(), i);

ย ย ย ย ย ย ย ย const dayOfWeek = date.getDay();



ย ย ย ย ย ย ย ย const dateOnly = new Date(date);

ย ย ย ย ย ย ย ย dateOnly.setHours(0,0,0,0);

ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย const dateString = date.toISOString().split('T')[0];

ย ย ย ย ย ย ย ย if (HOLIDAYS.includes(dateString)) {

ย ย ย ย ย ย ย ย ย ย continue;

ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย if (WORKING_HOURS.workingDays.includes(dayOfWeek) && dateOnly >= TODAY_DATE) {

ย ย ย ย ย ย ย ย ย ย const dayBtn = document.createElement('button');

ย ย ย ย ย ย ย ย ย ย dayBtn.classList.add('day-btn');

ย ย ย ย ย ย ย ย ย ย dayBtn.textContent = `${daysOfWeek[dayOfWeek]} ${date.getDate()}`;

ย ย ย ย ย ย ย ย ย ย dayBtn.dataset.date = dateString;

ย ย ย ย ย ย ย ย ย ย dayBtn.dataset.dayOfWeek = dayOfWeek;



ย ย ย ย ย ย ย ย ย ย dayBtn.addEventListener('click', () => {

ย ย ย ย ย ย ย ย ย ย ย ย document.querySelectorAll('.day-btn').forEach(btn => btn.classList.remove('active'));

ย ย ย ย ย ย ย ย ย ย ย ย dayBtn.classList.add('active');

ย ย ย ย ย ย ย ย ย ย ย ย selectedDate = dayBtn.dataset.date;

ย ย ย ย ย ย ย ย ย ย ย ย selectedTime = null;

ย ย ย ย ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย ย ย ย ย loadTimeSlots(selectedDate);

ย ย ย ย ย ย ย ย ย ย });

ย ย ย ย ย ย ย ย ย ย daySelector.appendChild(dayBtn);



ย ย ย ย ย ย ย ย ย ย if (!firstDayFound && !selectedDate) {

ย ย ย ย ย ย ย ย ย ย ย ย selectedDate = dayBtn.dataset.date;

ย ย ย ย ย ย ย ย ย ย ย ย firstDayFound = true;

ย ย ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย }



ย ย ย ย ย ย if (selectedDate) {

ย ย ย ย ย ย ย ย const activeBtn = daySelector.querySelector(`[data-date="${selectedDate}"]`);

ย ย ย ย ย ย ย ย if (activeBtn) {

ย ย ย ย ย ย ย ย ย ย activeBtn.classList.add('active');

ย ย ย ย ย ย ย ย ย ย loadTimeSlots(selectedDate);

ย ย ย ย ย ย ย ย } else if (firstDayFound) {

ย ย ย ย ย ย ย ย ย ย const firstBtn = daySelector.querySelector('.day-btn');

ย ย ย ย ย ย ย ย ย ย firstBtn.classList.add('active');

ย ย ย ย ย ย ย ย ย ย selectedDate = firstBtn.dataset.date;

ย ย ย ย ย ย ย ย ย ย loadTimeSlots(selectedDate);

ย ย ย ย ย ย ย ย } else {

ย ย ย ย ย ย ย ย ย ย document.getElementById('timeSlots').innerHTML = `<div class="loading">Nenhum dia disponรญvel para agendamento neste mรชs.</div>`;

ย ย ย ย ย ย ย ย ย ย selectedDate = null;

ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย } else {

ย ย ย ย ย ย ย ย document.getElementById('timeSlots').innerHTML = `<div class="loading">Selecione um dia para ver os horรกrios</div>`;

ย ย ย ย ย ย }

ย ย ย ย }

ย ย ย ยย

ย ย ย ย // Funรงรฃo para carregar horรกrios disponรญveis

ย ย ย ย async function loadTimeSlots(dateString) {

ย ย ย ย ย ย if (!db) {

ย ย ย ย ย ย ย ย showMessage('Firebase nรฃo configurado. Por favor, tente recarregar a pรกgina.', 'error');

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }

ย ย ย ย ย ยย

ย ย ย ย ย ย if (HOLIDAYS.includes(dateString)) {

ย ย ย ย ย ย ย ย document.getElementById('timeSlots').innerHTML = `<div class="loading">Nรฃo hรก expediente neste feriado.</div>`;

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }



ย ย ย ย ย ย const timeSlotsDiv = document.getElementById('timeSlots');

ย ย ย ย ย ย timeSlotsDiv.innerHTML = `<div class="loading">Carregando horรกrios para ${formatDate(dateString)}...</div>`;



ย ย ย ย ย ย try {

ย ย ย ย ย ย ย ย const appointmentsRef = db.collection('agendamentos');

ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย const snapshot = await appointmentsRef

ย ย ย ย ย ย ย ย ย ย .where('data', '==', dateString)

ย ย ย ย ย ย ย ย ย ย .get();

ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย const existingAppointments = {};

ย ย ย ย ย ย ย ย snapshot.forEach(doc => {

ย ย ย ย ย ย ย ย ย ย const data = doc.data();

ย ย ย ย ย ย ย ย ย ย if (data.status === 'agendado') {ย

ย ย ย ย ย ย ย ย ย ย ย ย if (existingAppointments[data.hora]) {

ย ย ย ย ย ย ย ย ย ย ย ย ย ย existingAppointments[data.hora]++;

ย ย ย ย ย ย ย ย ย ย ย ย } else {

ย ย ย ย ย ย ย ย ย ย ย ย ย ย existingAppointments[data.hora] = 1;

ย ย ย ย ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย });



ย ย ย ย ย ย ย ย const startHour = parseInt(WORKING_HOURS.start.split(':')[0]);

ย ย ย ย ย ย ย ย const startMinute = parseInt(WORKING_HOURS.start.split(':')[1]);

ย ย ย ย ย ย ย ย const endHour = parseInt(WORKING_HOURS.end.split(':')[0]);

ย ย ย ย ย ย ย ย const endMinute = parseInt(WORKING_HOURS.end.split(':')[1]);



ย ย ย ย ย ย ย ย let loopStartTime = new Date(dateString + 'T12:00:00');

ย ย ย ย ย ย ย ย loopStartTime.setHours(startHour, startMinute, 0, 0);



ย ย ย ย ย ย ย ย const endTime = new Date(dateString + 'T12:00:00');

ย ย ย ย ย ย ย ย endTime.setHours(endHour, endMinute, 0, 0);



ย ย ย ย ย ย ย ย const selectedDayDateOnly = new Date(dateString);

ย ย ย ย ย ย ย ย selectedDayDateOnly.setHours(0,0,0,0);



ย ย ย ย ย ย ย ย const todayDateOnly = new Date(NOW_DATE_GLOBAL);

ย ย ย ย ย ย ย ย todayDateOnly.setHours(0,0,0,0);



ย ย ย ย ย ย ย ย if (selectedDayDateOnly.getTime() === todayDateOnly.getTime()) {

ย ย ย ย ย ย ย ย ย ย let nextHour = new Date(NOW_DATE_GLOBAL);

ย ย ย ย ย ย ย ย ย ย nextHour.setHours(nextHour.getHours() + 1, 0, 0, 0);

ย ย ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย ย ย if (nextHour < loopStartTime) {

ย ย ย ย ย ย ย ย ย ย ย ย loopStartTime = new Date(loopStartTime);

ย ย ย ย ย ย ย ย ย ย } else {

ย ย ย ย ย ย ย ย ย ย ย ย loopStartTime = new Date(nextHour);

ย ย ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย const availableSlots = [];

ย ย ย ย ย ย ย ย let currentTimeSlot = new Date(loopStartTime);



ย ย ย ย ย ย ย ย if (currentTimeSlot > endTime) {

ย ย ย ย ย ย ย ย ย ย timeSlotsDiv.innerHTML = `<div class="loading">Todos os horรกrios para este dia jรก passaram ou estรฃo lotados.</div>`;

ย ย ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย while (currentTimeSlot <= endTime) {

ย ย ย ย ย ย ย ย ย ย const slotHour = String(currentTimeSlot.getHours()).padStart(2, '0');

ย ย ย ย ย ย ย ย ย ย const slotMinute = String(currentTimeSlot.getMinutes()).padStart(2, '0');

ย ย ย ย ย ย ย ย ย ย const time = `${slotHour}:${slotMinute}`;

ย ย ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย ย ย const bookingsCount = existingAppointments[time] || 0;

ย ย ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย ย ย const selectedDay = new Date(dateString + 'T12:00:00').getDay();

ย ย ย ย ย ย ย ย ย ย const currentMaxAppointments = selectedDay === 6 ? MAX_APPOINTMENTS_SATURDAY : MAX_APPOINTMENTS_PER_HOUR;

ย ย ย ย ย ย ย ย ย ย const isFull = bookingsCount >= currentMaxAppointments;



ย ย ย ย ย ย ย ย ย ย const isPastTime = selectedDayDateOnly.getTime() === todayDateOnly.getTime() && currentTimeSlot < NOW_DATE_GLOBAL;



ย ย ย ย ย ย ย ย ย ย let availabilityClass = '';



ย ย ย ย ย ย ย ย ย ย if (isFull || isPastTime) {

ย ย ย ย ย ย ย ย ย ย ย ย availabilityClass = 'unavailable';

ย ย ย ย ย ย ย ย ย ย } else {

ย ย ย ย ย ย ย ย ย ย ย ย availabilityClass = 'available';

ย ย ย ย ย ย ย ย ย ย }



ย ย ย ย ย ย ย ย ย ย availableSlots.push({

ย ย ย ย ย ย ย ย ย ย ย ย time,

ย ย ย ย ย ย ย ย ย ย ย ย isFull,

ย ย ย ย ย ย ย ย ย ย ย ย isPastTime,

ย ย ย ย ย ย ย ย ย ย ย ย availabilityClass,

ย ย ย ย ย ย ย ย ย ย });



ย ย ย ย ย ย ย ย ย ย currentTimeSlot.setHours(currentTimeSlot.getHours() + 1);

ย ย ย ย ย ย ย ย }



ย ย ย ย ย ย ย ย timeSlotsDiv.innerHTML = '';

ย ย ย ย ย ย ย ย if (availableSlots.length === 0) {

ย ย ย ย ย ย ย ย ย ย timeSlotsDiv.innerHTML = `<div class="loading">Nenhum horรกrio disponรญvel para este dia.</div>`;

ย ย ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย ย ย }



ย ย ย ย ย ย ย ย availableSlots.forEach(slot => {

ย ย ย ย ย ย ย ย ย ย const slotElement = document.createElement('div');

ย ย ย ย ย ย ย ย ย ย slotElement.classList.add('time-slot');

ย ย ย ย ย ย ย ย ย ย slotElement.textContent = slot.time;

ย ย ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย ย ย if (slot.availabilityClass) {

ย ย ย ย ย ย ย ย ย ย ย ย slotElement.classList.add(slot.availabilityClass);

ย ย ย ย ย ย ย ย ย ย }



ย ย ย ย ย ย ย ย ย ย if (!slot.isFull && !slot.isPastTime) {

ย ย ย ย ย ย ย ย ย ย ย ย slotElement.addEventListener('click', () => {

ย ย ย ย ย ย ย ย ย ย ย ย ย ย document.querySelectorAll('.time-slots .time-slot').forEach(s => s.classList.remove('selected'));

ย ย ย ย ย ย ย ย ย ย ย ย ย ย slotElement.classList.add('selected');

ย ย ย ย ย ย ย ย ย ย ย ย ย ย selectedTime = slot.time;

ย ย ย ย ย ย ย ย ย ย ย ย });

ย ย ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย ย ย timeSlotsDiv.appendChild(slotElement);

ย ย ย ย ย ย ย ย });



ย ย ย ย ย ย } catch (error) {

ย ย ย ย ย ย ย ย console.error("Erro ao carregar horรกrios:", error);

ย ย ย ย ย ย ย ย timeSlotsDiv.innerHTML = `<div class="error">Erro ao carregar horรกrios: ${error.message}</div>`;

ย ย ย ย ย ย }

ย ย ย ย }



ย ย ย ย // Funรงรฃo para formatar data (opcional, para exibiรงรฃo)

ย ย ย ย function formatDate(dateString) {

ย ย ย ย ย ย const [year, month, day] = dateString.split('-');

ย ย ย ย ย ย return `${day}/${month}/${year}`;

ย ย ย ย }

ย ย ย ยย

ย ย ย ย // Funรงรฃo para formatar hora (para ordenaรงรฃo)

ย ย ย ย function formatTime(timeString) {

ย ย ย ย ย ย const [hours, minutes] = timeString.split(':');

ย ย ย ย ย ย return parseInt(hours) * 60 + parseInt(minutes);

ย ย ย ย }

ย ย ย ยย

ย ย ย ย // Funรงรฃo para abrir a modal de ediรงรฃo de agendamento

ย ย ย ย async function openEditModal(id) {

ย ย ย ย ย ย editAppointmentId = id;

ย ย ย ย ย ย document.getElementById('edit-modal').style.display = 'flex';

ย ย ย ย ย ยย

ย ย ย ย ย ย const appointmentRef = db.collection('agendamentos').doc(id);

ย ย ย ย ย ย const doc = await appointmentRef.get();

ย ย ย ย ย ย const agendamento = doc.data();



ย ย ย ย ย ย document.getElementById('edit-agendamento-details').innerHTML = `

ย ย ย ย ย ย ย ย <p><strong>Cliente:</strong> ${agendamento.cliente}</p>

ย ย ย ย ย ย ย ย <p><strong>Atendente:</strong> ${agendamento.funcionario}</p>

ย ย ย ย ย ย ย ย <p><strong>Serviรงo:</strong> ${agendamento.servico}</p>

ย ย ย ย ย ย ย ย <p><strong>Agendamento atual:</strong> ${formatDate(agendamento.data)} รs ${agendamento.hora}</p>

ย ย ย ย ย ย `;

ย ย ย ย ย ยย

ย ย ย ย ย ย // Inicializa o calendรกrio da modal com a data do agendamento

ย ย ย ย ย ย editCalendarDate = new Date(agendamento.data + 'T12:00:00');

ย ย ย ย ย ย selectedDate = agendamento.data;

ย ย ย ย ย ย selectedTime = agendamento.hora;

ย ย ย ย ย ย generateEditDaySelector();

ย ย ย ย }



ย ย ย ย // Funรงรตes de navegaรงรฃo do calendรกrio da modal de ediรงรฃo

ย ย ย ย function changeEditMonth(delta) {

ย ย ย ย ย ย editCalendarDate.setMonth(editCalendarDate.getMonth() + delta);

ย ย ย ย ย ย generateEditDaySelector();

ย ย ย ย }



ย ย ย ย function generateEditDaySelector() {

ย ย ย ย ย ย const daySelector = document.getElementById('editDaySelector');

ย ย ย ย ย ย const monthYearSpan = document.getElementById('editCurrentMonthYear');

ย ย ย ย ย ย daySelector.innerHTML = '';



ย ย ย ย ย ย const monthNames = ['Janeiro', 'Fevereiro', 'Marรงo', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];

ย ย ย ย ย ย const daysOfWeek = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sรกb'];

ย ย ย ย ย ย monthYearSpan.textContent = `${monthNames[editCalendarDate.getMonth()]} de ${editCalendarDate.getFullYear()}`;



ย ย ย ย ย ย const today = new Date();

ย ย ย ย ย ย today.setHours(0,0,0,0);

ย ย ย ย ย ย const lastDayOfMonth = new Date(editCalendarDate.getFullYear(), editCalendarDate.getMonth() + 1, 0);



ย ย ย ย ย ย for (let i = 1; i <= lastDayOfMonth.getDate(); i++) {

ย ย ย ย ย ย ย ย const date = new Date(editCalendarDate.getFullYear(), editCalendarDate.getMonth(), i);

ย ย ย ย ย ย ย ย const dayOfWeek = date.getDay();



ย ย ย ย ย ย ย ย const dateOnly = new Date(date);

ย ย ย ย ย ย ย ย dateOnly.setHours(0,0,0,0);

ย ย ย ย ย ย ย ย const dateString = date.toISOString().split('T')[0];



ย ย ย ย ย ย ย ย if (WORKING_HOURS.workingDays.includes(dayOfWeek) && dateOnly >= TODAY_DATE && !HOLIDAYS.includes(dateString)) {

ย ย ย ย ย ย ย ย ย ย const dayBtn = document.createElement('button');

ย ย ย ย ย ย ย ย ย ย dayBtn.classList.add('day-btn');

ย ย ย ย ย ย ย ย ย ย dayBtn.textContent = `${daysOfWeek[dayOfWeek]} ${date.getDate()}`;

ย ย ย ย ย ย ย ย ย ย dayBtn.dataset.date = dateString;

ย ย ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย ย ย if (dateString === selectedDate) {

ย ย ย ย ย ย ย ย ย ย ย ย dayBtn.classList.add('active');

ย ย ย ย ย ย ย ย ย ย }



ย ย ย ย ย ย ย ย ย ย dayBtn.addEventListener('click', () => {

ย ย ย ย ย ย ย ย ย ย ย ย document.querySelectorAll('#editDaySelector .day-btn').forEach(btn => btn.classList.remove('active'));

ย ย ย ย ย ย ย ย ย ย ย ย dayBtn.classList.add('active');

ย ย ย ย ย ย ย ย ย ย ย ย selectedDate = dayBtn.dataset.date;

ย ย ย ย ย ย ย ย ย ย ย ย selectedTime = null;

ย ย ย ย ย ย ย ย ย ย ย ย loadEditTimeSlots(selectedDate);

ย ย ย ย ย ย ย ย ย ย });

ย ย ย ย ย ย ย ย ย ย daySelector.appendChild(dayBtn);

ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย }



ย ย ย ย ย ย if (selectedDate) {

ย ย ย ย ย ย ย ย loadEditTimeSlots(selectedDate);

ย ย ย ย ย ย } else {

ย ย ย ย ย ย ย ย document.getElementById('editTimeSlots').innerHTML = `<div class="loading">Selecione um dia para ver os horรกrios</div>`;

ย ย ย ย ย ย }

ย ย ย ย }

ย ย ย ยย

ย ย ย ย async function loadEditTimeSlots(dateString) {

ย ย ย ย ย ย const timeSlotsDiv = document.getElementById('editTimeSlots');

ย ย ย ย ย ย timeSlotsDiv.innerHTML = `<div class="loading">Carregando horรกrios...</div>`;



ย ย ย ย ย ย try {

ย ย ย ย ย ย ย ย const appointmentsRef = db.collection('agendamentos');

ย ย ย ย ย ย ย ย const snapshot = await appointmentsRef.where('data', '==', dateString).get();

ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย const existingAppointments = {};

ย ย ย ย ย ย ย ย snapshot.forEach(doc => {

ย ย ย ย ย ย ย ย ย ย if (doc.id !== editAppointmentId && doc.data().status === 'agendado') {

ย ย ย ย ย ย ย ย ย ย ย ย const data = doc.data();

ย ย ย ย ย ย ย ย ย ย ย ย if (existingAppointments[data.hora]) {

ย ย ย ย ย ย ย ย ย ย ย ย ย ย existingAppointments[data.hora]++;

ย ย ย ย ย ย ย ย ย ย ย ย } else {

ย ย ย ย ย ย ย ย ย ย ย ย ย ย existingAppointments[data.hora] = 1;

ย ย ย ย ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย });



ย ย ย ย ย ย ย ย const startHour = parseInt(WORKING_HOURS.start.split(':')[0]);

ย ย ย ย ย ย ย ย const startMinute = parseInt(WORKING_HOURS.start.split(':')[1]);

ย ย ย ย ย ย ย ย const endHour = parseInt(WORKING_HOURS.end.split(':')[0]);

ย ย ย ย ย ย ย ย const endMinute = parseInt(WORKING_HOURS.end.split(':')[1]);



ย ย ย ย ย ย ย ย let loopStartTime = new Date(dateString + 'T12:00:00');

ย ย ย ย ย ย ย ย loopStartTime.setHours(startHour, startMinute, 0, 0);

ย ย ย ย ย ย ย ย const endTime = new Date(dateString + 'T12:00:00');

ย ย ย ย ย ย ย ย endTime.setHours(endHour, endMinute, 0, 0);



ย ย ย ย ย ย ย ย const selectedDayDateOnly = new Date(dateString);

ย ย ย ย ย ย ย ย selectedDayDateOnly.setHours(0,0,0,0);

ย ย ย ย ย ย ย ย const todayDateOnly = new Date(NOW_DATE_GLOBAL);

ย ย ย ย ย ย ย ย todayDateOnly.setHours(0,0,0,0);



ย ย ย ย ย ย ย ย if (selectedDayDateOnly.getTime() === todayDateOnly.getTime()) {

ย ย ย ย ย ย ย ย ย ย let nextHour = new Date(NOW_DATE_GLOBAL);

ย ย ย ย ย ย ย ย ย ย nextHour.setHours(nextHour.getHours() + 1, 0, 0, 0);

ย ย ย ย ย ย ย ย ย ย if (nextHour < loopStartTime) {

ย ย ย ย ย ย ย ย ย ย ย ย loopStartTime = new Date(loopStartTime);

ย ย ย ย ย ย ย ย ย ย } else {

ย ย ย ย ย ย ย ย ย ย ย ย loopStartTime = new Date(nextHour);

ย ย ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย const availableSlots = [];

ย ย ย ย ย ย ย ย let currentTimeSlot = new Date(loopStartTime);

ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย while (currentTimeSlot <= endTime) {

ย ย ย ย ย ย ย ย ย ย const slotHour = String(currentTimeSlot.getHours()).padStart(2, '0');

ย ย ย ย ย ย ย ย ย ย const slotMinute = String(currentTimeSlot.getMinutes()).padStart(2, '0');

ย ย ย ย ย ย ย ย ย ย const time = `${slotHour}:${slotMinute}`;

ย ย ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย ย ย const bookingsCount = existingAppointments[time] || 0;

ย ย ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย ย ย const selectedDay = new Date(dateString + 'T12:00:00').getDay();

ย ย ย ย ย ย ย ย ย ย const currentMaxAppointments = selectedDay === 6 ? MAX_APPOINTMENTS_SATURDAY : MAX_APPOINTMENTS_PER_HOUR;

ย ย ย ย ย ย ย ย ย ย const isFull = bookingsCount >= currentMaxAppointments;



ย ย ย ย ย ย ย ย ย ย const isPastTime = selectedDayDateOnly.getTime() === todayDateOnly.getTime() && currentTimeSlot < NOW_DATE_GLOBAL;



ย ย ย ย ย ย ย ย ย ย availableSlots.push({

ย ย ย ย ย ย ย ย ย ย ย ย time,

ย ย ย ย ย ย ย ย ย ย ย ย isFull,

ย ย ย ย ย ย ย ย ย ย ย ย isPastTime,

ย ย ย ย ย ย ย ย ย ย ย ย isSelected: time === selectedTime,

ย ย ย ย ย ย ย ย ย ย });

ย ย ย ย ย ย ย ย ย ย currentTimeSlot.setHours(currentTimeSlot.getHours() + 1);

ย ย ย ย ย ย ย ย }



ย ย ย ย ย ย ย ย timeSlotsDiv.innerHTML = '';

ย ย ย ย ย ย ย ย availableSlots.forEach(slot => {

ย ย ย ย ย ย ย ย ย ย const slotElement = document.createElement('div');

ย ย ย ย ย ย ย ย ย ย slotElement.classList.add('time-slot');

ย ย ย ย ย ย ย ย ย ย slotElement.textContent = slot.time;

ย ย ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย ย ย if (slot.isFull || slot.isPastTime) {

ย ย ย ย ย ย ย ย ย ย ย ย slotElement.classList.add('unavailable');

ย ย ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย ย ย if (slot.isSelected) {

ย ย ย ย ย ย ย ย ย ย ย ย slotElement.classList.add('selected');

ย ย ย ย ย ย ย ย ย ย }



ย ย ย ย ย ย ย ย ย ย if (!slot.isFull && !slot.isPastTime) {

ย ย ย ย ย ย ย ย ย ย ย ย slotElement.addEventListener('click', () => {

ย ย ย ย ย ย ย ย ย ย ย ย ย ย document.querySelectorAll('#editTimeSlots .time-slot').forEach(s => s.classList.remove('selected'));

ย ย ย ย ย ย ย ย ย ย ย ย ย ย slotElement.classList.add('selected');

ย ย ย ย ย ย ย ย ย ย ย ย ย ย selectedTime = slot.time;

ย ย ย ย ย ย ย ย ย ย ย ย });

ย ย ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย ย ย timeSlotsDiv.appendChild(slotElement);

ย ย ย ย ย ย ย ย });

ย ย ย ย ย ย } catch (error) {

ย ย ย ย ย ย ย ย console.error("Erro ao carregar horรกrios para ediรงรฃo:", error);

ย ย ย ย ย ย ย ย timeSlotsDiv.innerHTML = `<div class="error">Erro ao carregar horรกrios: ${error.message}</div>`;

ย ย ย ย ย ย }

ย ย ย ย }

ย ย ย ยย

ย ย ย ย function closeEditModal() {

ย ย ย ย ย ย document.getElementById('edit-modal').style.display = 'none';

ย ย ย ย ย ย editAppointmentId = null;

ย ย ย ย ย ย selectedDate = null;

ย ย ย ย ย ย selectedTime = null;

ย ย ย ย ย ย loadAgendamentos();

ย ย ย ย }



ย ย ย ย async function saveEditedAppointment() {

ย ย ย ย ย ย if (!selectedDate || !selectedTime) {

ย ย ย ย ย ย ย ย showMessage('Por favor, selecione uma nova data e horรกrio.', 'error', 'edit-message-area');

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }



ย ย ย ย ย ย try {

ย ย ย ย ย ย ย ย const docRef = db.collection('agendamentos').doc(editAppointmentId);

ย ย ย ย ย ย ย ย await docRef.update({

ย ย ย ย ย ย ย ย ย ย data: selectedDate,

ย ย ย ย ย ย ย ย ย ย hora: selectedTime,

ย ย ย ย ย ย ย ย ย ย timestamp: firebase.firestore.FieldValue.serverTimestamp()

ย ย ย ย ย ย ย ย });



ย ย ย ย ย ย ย ย showMessage('Agendamento alterado com sucesso!', 'success', 'edit-message-area');

ย ย ย ย ย ย ย ย closeEditModal();

ย ย ย ย ย ย ย ย loadAgendamentos();

ย ย ย ย ย ย } catch (error) {

ย ย ย ย ย ย ย ย console.error("Erro ao salvar alteraรงรตes:", error);

ย ย ย ย ย ย ย ย showMessage(`Erro ao salvar: ${error.message}`, 'error', 'edit-message-area');

ย ย ย ย ย ย }

ย ย ย ย }



ย ย ย ย // Enviar formulรกrio de agendamento

ย ย ย ย document.getElementById('agendamentoForm').addEventListener('submit', async (e) => {

ย ย ย ย ย ย e.preventDefault();



ย ย ย ย ย ย if (!db || !isConfigured) {

ย ย ย ย ย ย ย ย showMessage('Erro: Firebase nรฃo estรก configurado. Por favor, recarregue a pรกgina.', 'error');

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }



ย ย ย ย ย ย const cliente = document.getElementById('cliente').value;

ย ย ย ย ย ย const telefone = document.getElementById('telefone').value;

ย ย ย ย ย ย const funcionario = document.getElementById('funcionario').value;

ย ย ย ย ย ย const servico = document.getElementById('servico').value;

ย ย ย ย ย ย const observacoes = document.getElementById('observacoes').value;



ย ย ย ย ย ย if (!cliente || !telefone || !funcionario || !servico || !selectedDate || !selectedTime) {

ย ย ย ย ย ย ย ย showMessage('Por favor, preencha todos os campos obrigatรณrios e selecione um dia e horรกrio.', 'error');

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }

ย ย ย ย ย ยย

ย ย ย ย ย ย if (HOLIDAYS.includes(selectedDate)) {

ย ย ย ย ย ย ย ย showMessage('Nรฃo รฉ possรญvel agendar neste feriado.', 'error');

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }



ย ย ย ย ย ย const phoneRegex = /^\d{10,11}$/;

ย ย ย ย ย ย if (!phoneRegex.test(telefone)) {

ย ย ย ย ย ย ย ย showMessage('Formato de telefone invรกlido. Use apenas nรบmeros, incluindo o DDD (10 ou 11 dรญgitos).', 'error');

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }

ย ย ย ย ย ยย

ย ย ย ย ย ย const selectedDayOfWeek = new Date(selectedDate + 'T12:00:00').getDay();

ย ย ย ย ย ย const allowedMondayServices = ['Atendimento', 'Primeira Prova Vestido', 'Retirada Vestido'];

ย ย ย ย ย ย if (selectedDayOfWeek === 1 && !allowedMondayServices.includes(servico)) {

ย ย ย ย ย ย ย ย showMessage('Na segunda-feira, apenas os serviรงos de "Atendimento", "Primeira Prova Vestido" e "Retirada Vestido" estรฃo disponรญveis.', 'error');

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }

ย ย ย ย ย ยย

ย ย ย ย ย ย try {

ย ย ย ย ย ย ย ย const appointmentsRef = db.collection('agendamentos');

ย ย ย ย ย ย ย ย const snapshot = await appointmentsRef

ย ย ย ย ย ย ย ย ย ย .where('data', '==', selectedDate)

ย ย ย ย ย ย ย ย ย ย .where('hora', '==', selectedTime)

ย ย ย ย ย ย ย ย ย ย .where('status', '!=', 'cancelado')

ย ย ย ย ย ย ย ย ย ย .get();



ย ย ย ย ย ย ย ย const selectedDay = new Date(selectedDate + 'T12:00:00').getDay();

ย ย ย ย ย ย ย ย const currentMaxAppointments = selectedDay === 6 ? MAX_APPOINTMENTS_SATURDAY : MAX_APPOINTMENTS_PER_HOUR;



ย ย ย ย ย ย ย ย if (snapshot.docs.length >= currentMaxAppointments) {

ย ย ย ย ย ย ย ย ย ย showMessage('Este horรกrio nรฃo estรก mais disponรญvel. Por favor, selecione outro.', 'error');

ย ย ย ย ย ย ย ย ย ย await loadTimeSlots(selectedDate);

ย ย ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย ย ย }



ย ย ย ย ย ย ย ย await db.collection('agendamentos').add({

ย ย ย ย ย ย ย ย ย ย cliente,

ย ย ย ย ย ย ย ย ย ย telefone,

ย ย ย ย ย ย ย ย ย ย funcionario,

ย ย ย ย ย ย ย ย ย ย servico,

ย ย ย ย ย ย ย ย ย ย data: selectedDate,

ย ย ย ย ย ย ย ย ย ย hora: selectedTime,

ย ย ย ย ย ย ย ย ย ย observacoes,

ย ย ย ย ย ย ย ย ย ย status: 'agendado',

ย ย ย ย ย ย ย ย ย ย timestamp: firebase.firestore.FieldValue.serverTimestamp()

ย ย ย ย ย ย ย ย });



ย ย ย ย ย ย ย ย showMessage('Agendamento realizado com sucesso!', 'success');

ย ย ย ย ย ย ย ย document.getElementById('agendamentoForm').reset();

ย ย ย ย ย ย ย ย selectedDate = null;

ย ย ย ย ย ย ย ย selectedTime = null;

ย ย ย ย ย ย ย ย document.getElementById('timeSlots').innerHTML = `<div class="loading">Selecione um dia para ver os horรกrios</div>`;

ย ย ย ย ย ย ย ย currentCalendarDate = new Date();ย

ย ย ย ย ย ย ย ย generateDaySelector();ย

ย ย ย ย ย ย } catch (error) {

ย ย ย ย ย ย ย ย console.error("Erro ao adicionar agendamento:", error);

ย ย ย ย ย ย ย ย showMessage(`Erro ao agendar: ${error.message}`, 'error');

ย ย ย ย ย ย }

ย ย ย ย });



ย ย ย ย // FUNรรO QUE GERA E BAIXA O PDF DOS AGENDAMENTOS DE UM DIA

ย ย ย ย function downloadPDF(date, appointments, trajesCount) {

ย ย ย ย ย ย if (!window.jspdf) {

ย ย ย ย ย ย ย ย alert('A biblioteca jsPDF nรฃo foi carregada. Tente recarregar a pรกgina.');

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }

ย ย ย ย ย ยย

ย ย ย ย ย ย const doc = new window.jspdf.jsPDF();

ย ย ย ย ย ย doc.setFontSize(18);

ย ย ย ย ย ย doc.text(`Agendamentos do Dia: ${formatDate(date)} | Trajes: ${trajesCount}`, 15, 20);

ย ย ย ย ย ยย

ย ย ย ย ย ย doc.setFontSize(14);

ย ย ย ย ย ย let y = 30;



ย ย ย ย ย ย appointments.forEach(agendamento => {

ย ย ย ย ย ย ย ย if (y > 280) {

ย ย ย ย ย ย ย ย ย ย doc.addPage();

ย ย ย ย ย ย ย ย ย ย y = 20;

ย ย ย ย ย ย ย ย }



ย ย ย ย ย ย ย ย doc.text(`- Cliente: ${agendamento.cliente} | Telefone: ${agendamento.telefone} | Horรกrio: ${agendamento.hora}`, 15, y);

ย ย ย ย ย ย ย ย y += 10;

ย ย ย ย ย ย });



ย ย ย ย ย ย doc.save(`agendamentos_${date}.pdf`);

ย ย ย ย }

ย ย ย ยย

ย ย ย ย // FUNรรO PARA CARREGAR E AGRUPAR AGENDAMENTOS PARA A LISTA

ย ย ย ย function loadAgendamentos() {

ย ย ย ย ย ย if (!db || !isConfigured) {

ย ย ย ย ย ย ย ย document.getElementById('agendamentos-list').innerHTML = `<div class="error">Erro: Firebase nรฃo estรก configurado. Por favor, recarregue a pรกgina.</div>`;

ย ย ย ย ย ย ย ย document.getElementById('concluidos-list').innerHTML = `<div class="error">Erro: Firebase nรฃo estรก configurado. Por favor, recarregue a pรกgina.</div>`;

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }

ย ย ย ย ย ยย

ย ย ย ย ย ย document.getElementById('agendamentos-list').innerHTML = `<div class="loading">Carregando agendamentos...</div>`;

ย ย ย ย ย ย document.getElementById('concluidos-list').innerHTML = `<div class="loading">Carregando agendamentos concluรญdos...</div>`;

ย ย ย ย ย ย document.getElementById('search-input').value = '';

ย ย ย ย ย ย document.getElementById('search-input-concluidos').value = '';



ย ย ย ย ย ย try {

ย ย ย ย ย ย ย ย db.collection('agendamentos')

ย ย ย ย ย ย ย ย ย ย .orderBy('timestamp', 'desc')

ย ย ย ย ย ย ย ย ย ย .onSnapshot(snapshot => {

ย ย ย ย ย ย ย ย ย ย ย ย allAppointments = snapshot.docs.map(doc => ({ ...doc.data(), id: doc.id }));

ย ย ย ย ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย ย ย ย ย nonConcludedAppointments = allAppointments.filter(a => a.status !== 'concluido');

ย ย ย ย ย ย ย ย ย ย ย ย concludedAppointments = allAppointments.filter(a => a.status === 'concluido');



ย ย ย ย ย ย ย ย ย ย ย ย renderAgendamentos(nonConcludedAppointments, 'agendamentos-list');

ย ย ย ย ย ย ย ย ย ย ย ย renderAgendamentos(concludedAppointments, 'concluidos-list', true);



ย ย ย ย ย ย ย ย ย ย }, error => {

ย ย ย ย ย ย ย ย ย ย ย ย console.error("Erro ao carregar agendamentos:", error);

ย ย ย ย ย ย ย ย ย ย ย ย document.getElementById('agendamentos-list').innerHTML = `<div class="error">Erro ao carregar agendamentos: ${error.message}</div>`;

ย ย ย ย ย ย ย ย ย ย ย ย document.getElementById('concluidos-list').innerHTML = `<div class="error">Erro ao carregar agendamentos: ${error.message}</div>`;

ย ย ย ย ย ย ย ย ย ย });



ย ย ย ย ย ย } catch (error) {

ย ย ย ย ย ย ย ย console.error("Erro ao carregar agendamentos:", error);

ย ย ย ย ย ย ย ย document.getElementById('agendamentos-list').innerHTML = `<div class="error">Erro ao carregar agendamentos: ${error.message}</div>`;

ย ย ย ย ย ย ย ย document.getElementById('concluidos-list').innerHTML = `<div class="error">Erro ao carregar agendamentos: ${error.message}</div>`;

ย ย ย ย ย ย }

ย ย ย ย }

ย ย ย ยย

ย ย ย ย // Funรงรฃo para renderizar os agendamentos na tela

ย ย ย ย function renderAgendamentos(agendamentosToRender, listId, isConcludedList = false) {

ย ย ย ย ย ย const agendamentosList = document.getElementById(listId);

ย ย ย ย ย ย agendamentosList.innerHTML = '';

ย ย ย ย ย ยย

ย ย ย ย ย ย if (agendamentosToRender.length === 0) {

ย ย ย ย ย ย ย ย agendamentosList.innerHTML = `<div class="loading">Nenhum agendamento encontrado.</div>`;

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }



ย ย ย ย ย ย const agendamentosPorDia = {};

ย ย ย ย ย ย agendamentosToRender.forEach(agendamento => {

ย ย ย ย ย ย ย ย const data = agendamento.data;

ย ย ย ย ย ย ย ย if (!agendamentosPorDia[data]) {

ย ย ย ย ย ย ย ย ย ย agendamentosPorDia[data] = [];

ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย agendamentosPorDia[data].push(agendamento);

ย ย ย ย ย ย });

ย ย ย ย ย ยย

ย ย ย ย ย ย const datasOrdenadas = Object.keys(agendamentosPorDia).sort((a, b) => {

ย ย ย ย ย ย ย ย const dateA = new Date(a);

ย ย ย ย ย ย ย ย const dateB = new Date(b);

ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย if (isConcludedList) {

ย ย ย ย ย ย ย ย ย ย return dateB - dateA; // Para concluรญdos, ordena da mais recente para a mais antiga

ย ย ย ย ย ย ย ย } else {

ย ย ย ย ย ย ย ย ย ย return dateA - dateB; // Para nรฃo-concluรญdos, ordena da mais antiga para a mais recente

ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย });

ย ย ย ย ย ยย

ย ย ย ย ย ย datasOrdenadas.forEach(data => {

ย ย ย ย ย ย ย ย const agendamentosDoDia = agendamentosPorDia[data];

ย ย ย ย ย ย ย ย agendamentosDoDia.sort((a, b) => formatTime(a.hora) - formatTime(b.hora));

ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย const trajesCount = agendamentosDoDia.filter(a => DRESS_SERVICES.includes(a.servico)).length;



ย ย ย ย ย ย ย ย const diaContainer = document.createElement('div');

ย ย ย ย ย ย ย ย diaContainer.classList.add('agendamentos-dia');

ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย let htmlDia = `

ย ย ย ย ย ย ย ย ย ย <h3>

ย ย ย ย ย ย ย ย ย ย ย ย <span>๐ Agendamentos do Dia ${formatDate(data)}</span>

ย ย ย ย ย ย ย ย ย ย ย ย <span class="trajes-count">๐ Trajes: ${trajesCount}</span>

ย ย ย ย ย ย ย ย ย ย ย ย <div class="btn-group">

ย ย ย ย ย ย ย ย ย ย ย ย ย <button class="btn-download-pdf" onclick="downloadPDF('${data}', ${JSON.stringify(agendamentosDoDia).replace(/"/g, '&quot;')}, ${trajesCount})">Baixar PDF</button>

ย ย ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย </h3>

ย ย ย ย ย ย ย ย `;

ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย agendamentosDoDia.forEach(agendamento => {

ย ย ย ย ย ย ย ย ย ย htmlDia += `

ย ย ย ย ย ย ย ย ย ย ย ย <div class="agendamento-card">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="agendamento-header">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <span class="agendamento-cliente">${agendamento.cliente}</span>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <span class="agendamento-data">${agendamento.hora}</span>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="agendamento-info">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="info-item">๐ <strong>Telefone:</strong> ${agendamento.telefone}

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <a href="https://wa.me/55${agendamento.telefone}?text=${encodeURIComponent('Olรก ' + agendamento.cliente + ', tudo bem? Aqui รฉ da Mr Jack - trajes para festa. Passando aqui para confirmar sua prova para o dia ' + formatDate(agendamento.data) + ' รs ' + agendamento.hora + '? ร importante experimentar para garantir que esteja tudo certo e, se aprovado, jรก levar.')}" target="_blank" class="whatsapp-icon">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <i class="fab fa-whatsapp"></i>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </a>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="info-item">๐จโ๐ผ <strong>Atendente:</strong> ${agendamento.funcionario}</div>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="info-item">๐ผ <strong>Serviรงo:</strong> ${agendamento.servico}</div>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ${agendamento.observacoes ? `<p style="font-size: 0.9em; color: #4b5563; margin-top: 10px;"><strong>Obs:</strong> ${agendamento.observacoes}</p>` : ''}

ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px;">

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <span class="status ${agendamento.status}">${agendamento.status.charAt(0).toUpperCase() + agendamento.status.slice(1)}</span>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ${agendamento.status !== 'cancelado' ? `<button class="btn btn-danger" onclick="cancelAgendamento('${agendamento.id}')">Cancelar</button>` : ''}

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ${agendamento.status !== 'concluido' ? `<button class="btn" style="background: linear-gradient(135deg, #10b981, #34d399); width: auto; padding: 8px 16px; font-size: 14px; margin: 0;" onclick="completeAgendamento('${agendamento.id}')">Concluir</button>` : ''}

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <button class="btn btn-alterar" onclick="openEditModal('${agendamento.id}')">Alterar</button>

ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย ย ย </div>

ย ย ย ย ย ย ย ย ย ย `;

ย ย ย ย ย ย ย ย });

ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย ย ย diaContainer.innerHTML = htmlDia;

ย ย ย ย ย ย ย ย agendamentosList.appendChild(diaContainer);

ย ย ย ย ย ย });

ย ย ย ย }

ย ย ย ยย

ย ย ย ย // Nova funรงรฃo para filtrar os agendamentos da aba principal

ย ย ย ย function filterAgendamentos(query) {

ย ย ย ย ย ย const normalizedQuery = query.toLowerCase().trim();

ย ย ย ย ย ย if (normalizedQuery === '') {

ย ย ย ย ย ย ย ย renderAgendamentos(nonConcludedAppointments, 'agendamentos-list');

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }

ย ย ย ย ย ยย

ย ย ย ย ย ย const filteredAppointments = nonConcludedAppointments.filter(agendamento => {

ย ย ย ย ย ย ย ย return agendamento.cliente.toLowerCase().includes(normalizedQuery);

ย ย ย ย ย ย });

ย ย ย ย ย ยย

ย ย ย ย ย ย renderAgendamentos(filteredAppointments, 'agendamentos-list');

ย ย ย ย }

ย ย ย ยย

ย ย ย ย // Nova funรงรฃo para filtrar os agendamentos da aba de concluรญdos

ย ย ย ย function filterConcluidos(query) {

ย ย ย ย ย ย const normalizedQuery = query.toLowerCase().trim();

ย ย ย ย ย ย if (normalizedQuery === '') {

ย ย ย ย ย ย ย ย renderAgendamentos(concludedAppointments, 'concluidos-list', true);

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }

ย ย ย ย ย ยย

ย ย ย ย ย ย const filteredAppointments = concludedAppointments.filter(agendamento => {

ย ย ย ย ย ย ย ย return agendamento.cliente.toLowerCase().includes(normalizedQuery);

ย ย ย ย ย ย });

ย ย ย ย ย ยย

ย ย ย ย ย ย renderAgendamentos(filteredAppointments, 'concluidos-list', true);

ย ย ย ย }



ย ย ย ย // Funรงรฃo para cancelar agendamento

ย ย ย ย async function cancelAgendamento(id) {

ย ย ย ย ย ย if (!confirm('Tem certeza que deseja cancelar este agendamento?')) {

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }

ย ย ย ย ย ย if (!db) {

ย ย ย ย ย ย ย ย showMessage('Firebase nรฃo configurado.', 'error');

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }

ย ย ย ย ย ย try {

ย ย ย ย ย ย ย ย await db.collection('agendamentos').doc(id).update({ status: 'cancelado' });

ย ย ย ย ย ย ย ย showMessage('Agendamento cancelado com sucesso!', 'success');

ย ย ย ย ย ย ย ย loadAgendamentos();

ย ย ย ย ย ย } catch (error) {

ย ย ย ย ย ย ย ย console.error("Erro ao cancelar agendamento:", error);

ย ย ย ย ย ย ย ย showMessage(`Erro ao cancelar agendamento: ${error.message}`, 'error');

ย ย ย ย ย ย }

ย ย ย ย }



ย ย ย ย // Funรงรฃo para concluir agendamento

ย ย ย ย async function completeAgendamento(id) {

ย ย ย ย ย ย if (!confirm('Tem certeza que deseja marcar este agendamento como concluรญdo?')) {

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }

ย ย ย ย ย ย if (!db) {

ย ย ย ย ย ย ย ย showMessage('Firebase nรฃo configurado.', 'error');

ย ย ย ย ย ย ย ย return;

ย ย ย ย ย ย }

ย ย ย ย ย ย try {

ย ย ย ย ย ย ย ย await db.collection('agendamentos').doc(id).update({ status: 'concluido' });

ย ย ย ย ย ย ย ย showMessage('Agendamento concluรญdo com sucesso!', 'success');

ย ย ย ย ย ย ย ย loadAgendamentos();

ย ย ย ย ย ย } catch (error) {

ย ย ย ย ย ย ย ย console.error("Erro ao concluir agendamento:", error);

ย ย ย ย ย ย ย ย showMessage(`Erro ao concluir agendamento: ${error.message}`, 'error');

ย ย ย ย ย ย }

ย ย ย ย }

ย ย </script>

</body>

</html>
